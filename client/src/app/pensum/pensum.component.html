<mat-toolbar color="primary" class="toolbar">
  <mat-toolbar-row>
    <span class="pensum-name">{{pensum.college_name}}</span>
    <button class="help" mat-icon-button 
      matTooltip="Para editar/crear el pensum, ver electivas, pensum o ir de vuelta a inicio,
                  vaya a la parte superior derecha, en la cual se encuentra el menu para ir hacia las opciones 
                  anteriores. Si desea editar/crear, se desplegara un buscador y una lista con
                  las materias disponibles, las cuales podra arrastrar hacia el pensum en su trimestre
                  correspondiente, donde igualmete podra ver la información de cada una de ellas (Para ver 
                  el detalle deberá darle al boton de editar o guardar los cambios). 
                  Una vez hecho lo anterior podrá asignarles las prelaciones a las asignaturas
                  mediante el boton 'dibujar prelacion', una vez asignadas las prelaciones seleccione el boton
                  de 'prelación lista'. Si ingresa en la opción de electivas, se desplegaran las electivas disponibles,
                  donde podra arrastrar hacia el cuadro que se encuentra en la parte izquiera. Finalmente, seleccionar 
                  el boton de guardar."
      matTooltipClass="tooltip-help">
      <mat-icon class="example-icon">help</mat-icon>
    </button>
    <span class="example-spacer"></span>
    <button mat-button [matMenuTriggerFor]="menu">
        <mat-icon>list</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="goToHome()">Inicio</button>
        <button mat-menu-item (click)="edit=!edit" *ngIf="admin">Editar</button>
        <button mat-menu-item (click)="togglePensumF()">Pensum</button>
        <button mat-menu-item (click)="togglePensumB()">Electivas</button>
      </mat-menu>
  </mat-toolbar-row>
</mat-toolbar>

<div cdkDropListGroup >
  <mat-drawer-container class="example-container" style="height: 593px !important">
    <!-- <mat-drawer mode="side" opened position="end" *ngIf="!edit" style="width: 156px;">
      <div class="side-content"></div>
    </mat-drawer>
    [ngStyle]="{'visibility': edit ? 'visible' : (!edit ? 'hidden' : null) }"
  -->
    <mat-drawer mode="side" opened position="end">
      <div class="side-content" *ngIf="edit" style="width: 140px;">
        <span class="title-pem">Universidad Rafael Urdaneta</span>
        <img class="img-sidenav" src="https://talloiresnetwork.tufts.edu/wp-content/uploads/talnet__1396.jpg" alt="">
      </div>
      <div class="side-content2" *ngIf="!edit" style="width: 140px;">
      <mat-grid-list cols="2" rowHeight="30px" class="search">
        <mat-grid-tile [colspan]="2" [rowspan]="1">
          <span class="search-text">Buscar Materia:</span>
        </mat-grid-tile>
        <mat-grid-tile [colspan]="2" [rowspan]="1">
          <mat-form-field class="example-form-field" style="width: 130px;">
            <input matInput type="text" [(ngModel)]="input" (keyup)="search(input)">
          </mat-form-field>
        </mat-grid-tile>
      </mat-grid-list>
      <div class="example-container">
        <button mat-button color="primary" (click)="addRestriction()">{{buttonNameAdd}}</button>
        <h5 class="select">Seleccione</h5>
        <div
          cdkDropList
          [cdkDropListData]="searchResult"
          class="example-list"
          style="background-color:#f9f9f9; padding: 8px;"
          (cdkDropListDropped)="drop($event)">
          <div>
            <div *ngIf="!found">
              <mat-icon class="example-icon focus">search</mat-icon>
              <h6>No se pudo encontrar </h6>
              <div class="notfound">
                <span><strong>'{{input}}'</strong></span>
              </div>
            </div>
            <div *ngIf="found">
              <div class="example-box" *ngFor="let item of searchResult" cdkDrag>
              <mat-card class="subject-card" id="{{item.subject_id}}">
                <mat-grid-list cols="4" rowHeight="15px">
                  <mat-grid-tile [colspan]="3" [rowspan]="1">
                    <mat-card class="code-subject">
                      <span class="subject-text">{{item.subject_code}}</span>
                    </mat-card>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="1" [rowspan]="1">
                    <mat-card class="hc-subject">
                      <span>{{item.subject_hc}}</span>
                    </mat-card>
                  </mat-grid-tile>
                </mat-grid-list>
                <mat-grid-list cols="2" rowHeight="20px">
                  <mat-grid-tile [colspan]="2" [rowspan]="1">
                    <mat-card class="name-subject">
                      <span class="subject-text">{{item.subject_name}}</span>
                    </mat-card>
                  </mat-grid-tile>
                </mat-grid-list>
              </mat-card>
            </div>
            </div>
            
            <div class="example-box" *ngIf="isBack">
                <mat-card class="subject-card">
                    <mat-grid-list cols="4" rowHeight="15px">
                      <mat-grid-tile [colspan]="3" [rowspan]="1">
                        <mat-card class="code-subject">
                          <span class="subject-text">no</span>
                        </mat-card>
                      </mat-grid-tile>
                      <mat-grid-tile [colspan]="1" [rowspan]="1">
                        <mat-card class="hc-subject">
                          <span>3</span>
                        </mat-card>
                      </mat-grid-tile>
                    </mat-grid-list>
                    <mat-grid-list cols="2" rowHeight="20px">
                      <mat-grid-tile [colspan]="2" [rowspan]="1">
                        <mat-card class="name-subject">
                          <span class="subject-text">ELECTIVA I</span>
                        </mat-card>
                      </mat-grid-tile>
                    </mat-grid-list>
                </mat-card>
            </div>
            <div class="example-box" *ngIf="isBack">
                <mat-card class="subject-card">
                    <mat-grid-list cols="4" rowHeight="15px">
                      <mat-grid-tile [colspan]="3" [rowspan]="1">
                        <mat-card class="code-subject">
                          <span class="subject-text">no</span>
                        </mat-card>
                      </mat-grid-tile>
                      <mat-grid-tile [colspan]="1" [rowspan]="1">
                        <mat-card class="hc-subject">
                          <span>3</span>
                        </mat-card>
                      </mat-grid-tile>
                    </mat-grid-list>
                    <mat-grid-list cols="2" rowHeight="20px">
                      <mat-grid-tile [colspan]="2" [rowspan]="1">
                        <mat-card class="name-subject">
                          <span class="subject-text">ELECTIVA II</span>
                        </mat-card>
                      </mat-grid-tile>
                    </mat-grid-list>
                </mat-card>
            </div>
            <div class="example-box" *ngIf="isBack">
                <mat-card class="subject-card">
                    <mat-grid-list cols="4" rowHeight="15px">
                      <mat-grid-tile [colspan]="3" [rowspan]="1">
                        <mat-card class="code-subject">
                          <span class="subject-text">no</span>
                        </mat-card>
                      </mat-grid-tile>
                      <mat-grid-tile [colspan]="1" [rowspan]="1">
                        <mat-card class="hc-subject">
                          <span>3</span>
                        </mat-card>
                      </mat-grid-tile>
                    </mat-grid-list>
                    <mat-grid-list cols="2" rowHeight="20px">
                      <mat-grid-tile [colspan]="2" [rowspan]="1">
                        <mat-card class="name-subject">
                          <span class="subject-text">ELECTIVA III</span>
                        </mat-card>
                      </mat-grid-tile>
                    </mat-grid-list>
                </mat-card>
            </div>
            <div class="example-box2">
                <mat-card class="subject-card">
                    <mat-grid-list cols="4" rowHeight="15px">
                      <mat-grid-tile [colspan]="3" [rowspan]="1">
                        <mat-card class="code-subject">
                          <span class="subject-text">no</span>
                        </mat-card>
                      </mat-grid-tile>
                      <mat-grid-tile [colspan]="1" [rowspan]="1">
                        <mat-card class="hc-subject">
                          <span>non</span>
                        </mat-card>
                      </mat-grid-tile>
                    </mat-grid-list>
                    <mat-grid-list cols="2" rowHeight="20px">
                      <mat-grid-tile [colspan]="2" [rowspan]="1">
                        <mat-card class="name-subject">
                          <span class="subject-text">no</span>
                        </mat-card>
                      </mat-grid-tile>
                    </mat-grid-list>
                </mat-card>
            </div>
          </div>
        </div>
        <div class="btn-save">
          <button mat-button color="primary" (click)="save()">Guardar</button>
        </div>
      </div>
    </div>
    </mat-drawer>
    <mat-drawer-content style="overflow-y: -webkit-paged-y !important;">
      <mat-spinner style="margin: 0 auto; top: 150px;" color="accent" *ngIf="showLoadder" ></mat-spinner>
      <!-- <h3 style="margin: 0 auto; top: 150px;" *ngIf="showLoadder">Cargando...</h3> -->
      <mat-card class="pensum pensum-back" *ngIf="Show || isBack && !showLoadder">
        <mat-grid-list cols="10" rowHeight="100px">
          <mat-grid-tile [colspan]="10" [rowspan]="1">
            <span> <strong>REPOSITORIO DE ASIGNATURAS ELECTIVAS</strong> </span>
          </mat-grid-tile>
          <mat-grid-tile [colspan]="10" [rowspan]="3" class="electivas-table">
            <mat-card class="electivas">
              <div
                cdkDropList
                #todoList="cdkDropList"
                [cdkDropListData]="electives"
                class="example-list"
                (cdkDropListDropped)="drop2($event)">
                <mat-grid-list cols="8" rowHeight="30px" class="electivas-table">
                  <mat-grid-tile [colspan]="2" [rowspan]="1" class="row-header">
                    <span>CÓDIGO</span>
                  </mat-grid-tile>
                  <mat-grid-tile [colspan]="4" [rowspan]="1" class="row-header">
                    <span>DENOMINACIÓN</span>
                  </mat-grid-tile>
                </mat-grid-list>
                <div class="example-box3" *ngFor="let item of electives" cdkDrag>
                  <mat-card class="electiva" (click)="onClick(item)">
                    <mat-grid-list cols="8" rowHeight="80px" class="list">
                      <mat-grid-tile [colspan]="2" [rowspan]="1" class="row-item">
                        <span>{{item.subject_code}}</span>
                      </mat-grid-tile>
                      <mat-grid-tile [colspan]="4" [rowspan]="1" class="row-item">
                        <span>{{item.subject_name}}</span>
                      </mat-grid-tile>
                    </mat-grid-list>
                  </mat-card>
                </div>
              </div>
            </mat-card> 
          </mat-grid-tile>
        </mat-grid-list>
      </mat-card>
      <mat-card class="pensum" *ngIf="Show || isFront && !showLoadder">
        <mat-card-content class="pensum-content">
          <mat-card class="pensum-header" id="card-pensum">
            <mat-grid-list cols="4" rowHeight="20px">
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <span class="space"></span>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <span class="space"></span>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <span class="space"></span>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1" class="save-pensum">
                <!--<button mat-button color="primary" (click)="save()">Guardar</button>-->
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <span class="pensum-name-header">Universidad Rafael Urdaneta</span> 
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="3">
                <mat-form-field>
                  <input matInput [matDatepicker]="dp" style="text-transform: uppercase;" [value]="pensum.pensum_date" (dateInput)="setDate($event)" [disabled]="edit">
                  <mat-datepicker-toggle matSuffix [for]="dp" *ngIf="!edit" ></mat-datepicker-toggle>
                  <mat-datepicker #dp></mat-datepicker>
                </mat-form-field>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                <span class="pensum-name-header">Nombre:___________________</span> 
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
                <span class="pensum-name-header">Facultad de {{pensum.faculty_name}}</span>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                <span class="pensum-name-header">Apellido:___________________</span> 
              </mat-grid-tile>
              <mat-grid-tile [colspan]="1" [rowspan]="1">
               <span class="pensum-name-header">Escuela de {{pensum.college_name}}</span>
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                <span class="pensum-name-header">C.I.:_______________________</span>
              </mat-grid-tile>
            </mat-grid-list> 
          </mat-card>
          <mat-card class="pensum-body" id="card-pensum2">
            <mat-grid-list cols="20" rowHeight="30px">
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                I SEM
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                II SEM
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                III SEM
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                IV SEM
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                V SEM
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                VI SEM
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                VII SEM
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                VIII SEM
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                IX SEM
              </mat-grid-tile>
              <mat-grid-tile [colspan]="2" [rowspan]="1">
                X SEM
              </mat-grid-tile>
            </mat-grid-list>
            <div class="term-container">
              <div *ngFor="let item of done.slice(1); let i=index" class="term"> 
                <app-term [done]="item" [edit]="edit" [term]="i+1" (droped)="drop($event)" (clicked)="onClick($event, item)"></app-term>
              </div>
              <!-- [ngStyle]="{'left': edit ? '79.5%' : (!edit ? '89.5%' : null) }" -->
              <div cdkDrag cdkDragLockAxis="y" class="term10" style="left: 80%;">
                  <div class="example-box" >
                      <mat-card class="subject-card">
                          <mat-grid-list cols="4" rowHeight="15px">
                            <mat-grid-tile [colspan]="3" [rowspan]="1">
                              <mat-card class="code-subject">
                                <span class="subject-text">  </span>
                              </mat-card>
                            </mat-grid-tile>
                            <mat-grid-tile [colspan]="1" [rowspan]="1">
                              <mat-card class="hc-subject">
                                <span>3</span>
                              </mat-card>
                            </mat-grid-tile>
                          </mat-grid-list>
                          <mat-grid-list cols="2" rowHeight="20px">
                            <mat-grid-tile [colspan]="2" [rowspan]="1">
                              <mat-card class="name-subject">
                                <span class="subject-text">ELECTIVA III</span>
                              </mat-card>
                            </mat-grid-tile>
                          </mat-grid-list>
                      </mat-card>
                  </div>
              </div>
            </div>
          </mat-card>
        </mat-card-content>
      </mat-card>
    </mat-drawer-content>
</mat-drawer-container>
